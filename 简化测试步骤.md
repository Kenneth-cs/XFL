# 简化测试步骤（避免代码复制错误）

## 方法1：分步执行（最简单）

在浏览器Console中，**一行一行**复制执行：

### 第1步：获取Token
```javascript
localStorage.getItem('admin_token')
```
**应该看到一串长字符串**，如果是 `null`，说明没登录，请先登录。

---

### 第2步：手动发起API请求
```javascript
fetch('/api/v1/matches?page=1&limit=5', {headers: {'Authorization': 'Bearer ' + localStorage.getItem('admin_token')}}).then(res => res.json()).then(data => window.testData = data)
```
**执行后应该看到：** `Promise {<pending>}`

---

### 第3步：查看数据（等待2秒后执行）
```javascript
window.testData
```
**展开查看返回的数据结构**

---

### 第4步：检查关小姐的数据
```javascript
console.log('=== 所有批次 ==='); window.testData.items.forEach((item, i) => { console.log(`批次${i+1}: 发起人=${item.initiator?.profile?.baseInfo?.name || '未知'} (${item.initiator?.id}), 有happiness=${!!item.initiator?.happiness}`) })
```

---

### 第5步：检查第一个批次的happiness详细信息
```javascript
console.log('第一个批次发起人happiness:', window.testData.items[0]?.initiator?.happiness)
```

**如果显示有 `dimensions` 和 `averageScore` 字段，数据就是正确的！**

---

## 方法2：使用Network面板（更直观）

1. 按 `F12` 打开开发者工具
2. 切换到 `Network` 标签
3. 筛选 `Fetch/XHR`
4. 刷新页面或点击"智能匹配"菜单
5. 找到 `matches?page=1&limit=10` 请求
6. 点击该请求
7. 切换到 `Response` 标签
8. 查看返回的JSON数据

**检查点：**
```json
{
  "items": [
    {
      "initiator": {
        "id": "XFL00133614",
        "happiness": {
          "dimensions": [...],     ← 这个字段必须存在
          "averageScore": 8.18,    ← 这个字段必须存在
          ...
        }
      }
    }
  ]
}
```

---

## 方法3：直接在浏览器地址栏测试（最简单）

1. 复制以下完整URL到浏览器新标签：
```
http://124.222.88.25:8080/api/v1/matches?page=1&limit=5
```

2. 如果浏览器提示登录，说明Token没有自动携带

3. 改用Postman或其他API测试工具：
   - URL: `http://124.222.88.25:8080/api/v1/matches?page=1&limit=5`
   - Method: `GET`
   - Headers: 
     - `Authorization`: `Bearer <你的token>`
     - （token从浏览器Console执行 `localStorage.getItem('admin_token')` 获取）

---

## 预期结果判断

### ✅ 如果看到：
```javascript
{
  dimensions: Array(20) [...]
  averageScore: 8.18
  totalMaxScore: 772
  totalRawScore: 610
}
```
**说明数据正确！问题在前端渲染或缓存，不需要迁移数据库。**

### ❌ 如果看到：
```javascript
{
  "积极习惯": 9,
  "积极体验": 8,
  ...
}
```
**或者显示 `null` / `undefined`**
**说明数据格式错误或不存在，需要迁移数据库。**

---

## 如果所有方法都失败

直接执行数据库迁移：
```bash
cd "/Users/cs/Desktop/CS/创业/相亲项目开发/幸福力项目开发"
./数据库迁移步骤.sh
```

**请告诉我您看到了什么结果！**
