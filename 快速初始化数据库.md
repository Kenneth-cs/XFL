# 快速初始化数据库指南

## 方法1：使用检查脚本（推荐）

```bash
cd "/Users/cs/Desktop/CS/创业/相亲项目开发/幸福力项目开发"
./检查和初始化数据库.sh
```

这个脚本会自动检查：
- MySQL是否可以连接
- xingfuli数据库是否存在
- 数据表是否已创建
- 是否有初始数据

---

## 方法2：手动检查和初始化

### 第1步：检查数据库是否存在

```bash
export PATH="/usr/local/mysql/bin:$PATH"
mysql -u root -p
```

然后在MySQL命令行中执行：
```sql
SHOW DATABASES LIKE 'xingfuli';
```

**如果返回空结果** = 数据库不存在，需要初始化  
**如果返回xingfuli** = 数据库存在，继续检查表

### 第2步：检查表是否存在

在MySQL命令行中：
```sql
USE xingfuli;
SHOW TABLES;
```

**如果返回9个表** = 表已创建 ✅  
**如果返回空或少于9个** = 需要初始化

### 第3步：初始化数据库

如果数据库不存在或表不全，执行初始化：

```bash
# 退出MySQL（输入exit）
exit

# 进入数据库目录
cd "/Users/cs/Desktop/CS/创业/相亲项目开发/幸福力项目开发/database"

# 执行初始化脚本
mysql -u root -p < 01_create_database.sql
mysql -u root -p < 02_create_tables.sql
mysql -u root -p < 03_init_data.sql
```

### 第4步：验证初始化成功

```bash
mysql -u root -p

# 在MySQL中执行：
USE xingfuli;
SHOW TABLES;

# 应该看到9个表：
# 1. sys_store
# 2. sys_user
# 3. app_user
# 4. app_user_profile
# 5. assessment_record
# 6. match_batch
# 7. match_detail
# 8. service_track
# 9. sys_id_sequence

# 查看初始数据
SELECT * FROM sys_store;
SELECT * FROM sys_user;

# 退出
exit
```

---

## 方法3：快速一键初始化

如果确定要重新初始化（会清空现有数据），直接执行：

```bash
cd "/Users/cs/Desktop/CS/创业/相亲项目开发/幸福力项目开发/database"

# 一次性执行所有初始化脚本
mysql -u root -p << EOF
source 01_create_database.sql
source 02_create_tables.sql
source 03_init_data.sql
exit
EOF
```

---

## ✅ 初始化成功的标志

执行以下查询应该有结果：

```bash
mysql -u root -p -e "USE xingfuli; SELECT * FROM sys_store;"
```

应该看到：
```
+--------+------------------+-----------------+-------------+
| id     | name             | mv_template_id  | status      |
+--------+------------------+-----------------+-------------+
| XFL001 | 总部测试门店      | 3               | 1           |
+--------+------------------+-----------------+-------------+
```

---

## 📝 数据库配置信息

初始化后，后端 `.env` 文件应该包含：

```env
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=你的MySQL密码
DB_DATABASE=xingfuli
```

---

## 🚀 初始化后的下一步

1. ✅ 确认数据库初始化成功
2. ✅ 配置后端 `.env` 文件
3. ✅ 启动后端：`cd backend && npm run start:dev`
4. ✅ 测试后端：访问 http://localhost:3000/api/v1/health
5. ✅ 测试前端：访问 http://localhost:5174

---

## ⚠️ 常见问题

### Q: 初始化时报错 "database exists"
**答：** 数据库已存在，可以跳过第1个脚本，直接执行表和数据初始化

### Q: 初始化时报错 "Access denied"
**答：** 密码错误，请检查输入的密码

### Q: 看不到sys_store表的数据
**答：** 可能03_init_data.sql没执行成功，重新执行一次

---

需要帮助？随时告诉我！😊

