import{d as N,r as h,o as B,c as S,e as l,f as n,w as s,g as v,h as m,l as _,s as y,j as i,t as V,i as c,_ as $}from"./index-DckvbOKW.js";const z={class:"staff-approval"},D=N({__name:"StaffApproval",setup(R){const p=h(!1),f=h([]),w=[{title:"用户ID",dataIndex:"id",key:"id",width:150},{title:"姓名",dataIndex:"name",key:"name",width:100},{title:"身份证号",dataIndex:"idCard",key:"idCard",width:180},{title:"注册门店",dataIndex:"storeId",key:"storeId",width:100},{title:"手机号",dataIndex:"phone",key:"phone",width:130},{title:"申请角色",key:"role",width:120},{title:"状态",key:"status",width:100},{title:"申请时间",dataIndex:"createdAt",key:"createdAt",width:180},{title:"操作",key:"actions",width:180,fixed:"right"}],x=t=>({matchmaker:"普通红娘",manager:"门店负责人",admin:"门店老板"})[t]||t,C=t=>({matchmaker:"blue",manager:"cyan",admin:"purple"})[t]||"default",k=async()=>{var t,e;p.value=!0;try{const a=await v.get("/users/sys",{params:{status:0}});f.value=a.data||a||[]}catch(a){m.error(((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"加载待审核人员失败")}finally{p.value=!1}},g=async(t,e)=>{var a,o;try{await v.patch(`/users/sys/${t.id}/approve`,{approve:e}),m.success(e?"审核通过":"已拒绝"),k()}catch(r){m.error(((o=(a=r.response)==null?void 0:a.data)==null?void 0:o.message)||"操作失败")}};return B(()=>{k()}),(t,e)=>{const a=n("a-page-header"),o=n("a-tag"),r=n("a-button"),I=n("a-space"),b=n("a-table");return c(),S("div",z,[l(a,{title:"人员审核","sub-title":"审核待审核的后台人员注册申请"}),l(b,{columns:w,"data-source":f.value,loading:p.value,"row-key":"id"},{bodyCell:s(({column:u,record:d})=>[u.key==="role"?(c(),_(o,{key:0,color:C(d.role)},{default:s(()=>[i(V(x(d.role)),1)]),_:2},1032,["color"])):y("",!0),u.key==="status"?(c(),_(o,{key:1,color:"orange"},{default:s(()=>[...e[0]||(e[0]=[i("待审核",-1)])]),_:1})):y("",!0),u.key==="actions"?(c(),_(I,{key:2},{default:s(()=>[l(r,{type:"primary",size:"small",onClick:A=>g(d,!0)},{default:s(()=>[...e[1]||(e[1]=[i(" 通过 ",-1)])]),_:1},8,["onClick"]),l(r,{danger:"",size:"small",onClick:A=>g(d,!1)},{default:s(()=>[...e[2]||(e[2]=[i(" 拒绝 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)):y("",!0)]),_:1},8,["data-source","loading"])])}}}),j=$(D,[["__scopeId","data-v-5867e520"]]);export{j as default};
