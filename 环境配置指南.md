# çŽ¯å¢ƒé…ç½®æŒ‡å—

## âœ… å½“å‰çŠ¶æ€æ£€æŸ¥

### MySQL
- âœ… **å·²å®‰è£…** - ä½äºŽ `/usr/local/mysql/`
- âœ… **æ­£åœ¨è¿è¡Œ** - è¿›ç¨‹ID: 582
- ðŸ“ éœ€è¦æ·»åŠ åˆ°PATHï¼ˆæ–¹ä¾¿ä½¿ç”¨å‘½ä»¤ï¼‰

### Redis
- âŒ **æœªå®‰è£…** - éœ€è¦å®‰è£…

---

## ðŸ”§ é…ç½®æ­¥éª¤

### 1. æ·»åŠ MySQLåˆ°PATHï¼ˆæŽ¨èï¼‰

è¿™æ ·æ‚¨å°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨ `mysql` å‘½ä»¤ï¼Œè€Œä¸éœ€è¦è¾“å…¥å®Œæ•´è·¯å¾„ã€‚

**ä¸´æ—¶æ·»åŠ ï¼ˆå½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰ï¼š**
```bash
export PATH="/usr/local/mysql/bin:$PATH"
```

**æ°¸ä¹…æ·»åŠ ï¼ˆæŽ¨èï¼‰ï¼š**
```bash
# ç¼–è¾‘æ‚¨çš„shellé…ç½®æ–‡ä»¶
echo 'export PATH="/usr/local/mysql/bin:$PATH"' >> ~/.zshrc

# é‡æ–°åŠ è½½é…ç½®
source ~/.zshrc
```

**éªŒè¯ï¼š**
```bash
which mysql
# åº”æ˜¾ç¤º: /usr/local/mysql/bin/mysql

mysql --version
# åº”æ˜¾ç¤ºMySQLç‰ˆæœ¬ä¿¡æ¯
```

---

### 2. å®‰è£…Redis

Redisæ˜¯é¡¹ç›®å¿…éœ€çš„ä¾èµ–ï¼ˆç”¨äºŽIDç”Ÿæˆå’Œç¼“å­˜ï¼‰ã€‚

#### æ–¹æ³•1ï¼šä½¿ç”¨å®˜æ–¹ä¸‹è½½ï¼ˆæŽ¨èï¼Œä¸éœ€è¦Homebrewï¼‰

```bash
# ä¸‹è½½Redis
curl -O https://download.redis.io/releases/redis-7.2.3.tar.gz

# è§£åŽ‹
tar xzf redis-7.2.3.tar.gz
cd redis-7.2.3

# ç¼–è¯‘å®‰è£…
make
sudo make install

# éªŒè¯å®‰è£…
which redis-server
redis-server --version
```

#### æ–¹æ³•2ï¼šå®‰è£…HomebrewåŽä½¿ç”¨ï¼ˆå¦‚æžœæ‚¨æƒ³è¦Homebrewï¼‰

```bash
# å®‰è£…Homebrew
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…Redis
brew install redis

# å¯åŠ¨Redis
brew services start redis
```

#### æ–¹æ³•3ï¼šä½¿ç”¨Dockerï¼ˆå¦‚æžœå·²å®‰è£…Dockerï¼‰

```bash
# è¿è¡ŒRediså®¹å™¨
docker run -d -p 6379:6379 --name redis redis:7.2-alpine

# éªŒè¯
docker ps | grep redis
```

---

### 3. å¯åŠ¨Redisï¼ˆé€‰æ‹©å¯¹åº”æ–¹æ³•ï¼‰

#### å¦‚æžœä½¿ç”¨å®˜æ–¹ç¼–è¯‘å®‰è£…ï¼š

**å‰å°è¿è¡Œï¼ˆç”¨äºŽæµ‹è¯•ï¼‰ï¼š**
```bash
redis-server
# ä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£æ‰“å¼€
```

**åŽå°è¿è¡Œï¼ˆæŽ¨èï¼‰ï¼š**
```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
sudo mkdir -p /usr/local/etc
sudo cp redis.conf /usr/local/etc/redis.conf

# ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä½¿å…¶åŽå°è¿è¡Œ
sudo sed -i '' 's/daemonize no/daemonize yes/' /usr/local/etc/redis.conf

# å¯åŠ¨
redis-server /usr/local/etc/redis.conf
```

#### å¦‚æžœä½¿ç”¨Homebrewï¼š
```bash
brew services start redis
```

#### å¦‚æžœä½¿ç”¨Dockerï¼š
```bash
# å·²ç»åœ¨åŽå°è¿è¡Œï¼Œæ— éœ€é¢å¤–æ“ä½œ
docker start redis  # å¦‚æžœå®¹å™¨å·²åœæ­¢
```

---

### 4. éªŒè¯Redisæ˜¯å¦è¿è¡Œ

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨redis-cli
redis-cli ping
# åº”è¿”å›ž: PONG

# æ–¹æ³•2ï¼šæ£€æŸ¥è¿›ç¨‹
ps aux | grep redis-server | grep -v grep

# æ–¹æ³•3ï¼šæ£€æŸ¥ç«¯å£
lsof -i :6379
```

---

## ðŸš€ å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼ˆRediså®‰è£…åŽï¼‰

### æ–¹æ¡ˆAï¼šæœ€ç®€å•çš„æ–¹å¼ï¼ˆæŽ¨èç»™é¦–æ¬¡ç”¨æˆ·ï¼‰

**1. å¯åŠ¨Redisï¼ˆæ–°ç»ˆç«¯1ï¼‰ï¼š**
```bash
redis-server
# ä¿æŒæ­¤çª—å£æ‰“å¼€
```

**2. é…ç½®åŽç«¯çŽ¯å¢ƒï¼ˆæ–°ç»ˆç«¯2ï¼‰ï¼š**
```bash
cd "/Users/cs/Desktop/CS/åˆ›ä¸š/ç›¸äº²é¡¹ç›®å¼€å‘/å¹¸ç¦åŠ›é¡¹ç›®å¼€å‘/backend"

# åˆ›å»º.envæ–‡ä»¶
cat > .env << 'EOF'
NODE_ENV=development
PORT=3000
API_PREFIX=api/v1

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=
DB_DATABASE=xingfuli

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# JWTé…ç½®
JWT_SECRET=xingfuli-secret-key-for-development-2024
JWT_EXPIRES_IN=7d

# COSé…ç½®ï¼ˆæš‚æ—¶ç•™ç©ºï¼‰
COS_SECRET_ID=
COS_SECRET_KEY=
COS_BUCKET=
COS_REGION=ap-guangzhou
EOF

# æ³¨æ„ï¼šå¦‚æžœMySQLæœ‰å¯†ç ï¼Œéœ€è¦ä¿®æ”¹DB_PASSWORD
# ä½¿ç”¨ä»»æ„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€.envæ–‡ä»¶ä¿®æ”¹ï¼š
# nano .env
# æˆ–
# open -e .env
```

**3. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆç»ˆç«¯2ï¼‰ï¼š**
```bash
# ä¸´æ—¶æ·»åŠ MySQLåˆ°PATHï¼ˆå¦‚æžœè¿˜æ²¡æ°¸ä¹…æ·»åŠ ï¼‰
export PATH="/usr/local/mysql/bin:$PATH"

# è¿›å…¥æ•°æ®åº“ç›®å½•
cd "/Users/cs/Desktop/CS/åˆ›ä¸š/ç›¸äº²é¡¹ç›®å¼€å‘/å¹¸ç¦åŠ›é¡¹ç›®å¼€å‘/database"

# æ‰§è¡Œåˆå§‹åŒ–
mysql -u root -p < 01_create_database.sql
mysql -u root -p < 02_create_tables.sql
mysql -u root -p < 03_init_data.sql
# è¾“å…¥æ‚¨çš„MySQLå¯†ç 
```

**4. å¯åŠ¨åŽç«¯ï¼ˆç»ˆç«¯2ï¼‰ï¼š**
```bash
cd "/Users/cs/Desktop/CS/åˆ›ä¸š/ç›¸äº²é¡¹ç›®å¼€å‘/å¹¸ç¦åŠ›é¡¹ç›®å¼€å‘/backend"
npm run start:dev
```

**çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºæˆåŠŸï¼š**
```
âœ… Redisè¿žæŽ¥æˆåŠŸï¼ˆIDç”Ÿæˆå™¨ï¼‰
âœ… Redisè¿žæŽ¥æˆåŠŸ
ðŸš€ Application is running on: http://localhost:3000/api/v1
```

**5. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯3ï¼‰ï¼š**
```bash
cd "/Users/cs/Desktop/CS/åˆ›ä¸š/ç›¸äº²é¡¹ç›®å¼€å‘/å¹¸ç¦åŠ›é¡¹ç›®å¼€å‘/frontend-h5"
npm run dev
```

**çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºæˆåŠŸï¼š**
```
VITE v5.x.x  ready in xxx ms
âžœ  Local:   http://localhost:5174/
```

**6. åœ¨æµè§ˆå™¨è®¿é—®ï¼š**
```
http://localhost:5174
```

---

## ðŸ“ å¸¸ç”¨MySQLå‘½ä»¤ï¼ˆæ·»åŠ PATHåŽï¼‰

```bash
# è¿žæŽ¥MySQL
mysql -u root -p

# æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨
mysql -u root -p -e "SHOW DATABASES;"

# æŸ¥çœ‹xingfuliæ•°æ®åº“çš„è¡¨
mysql -u root -p -e "USE xingfuli; SHOW TABLES;"

# åœæ­¢MySQLï¼ˆå¦‚éœ€è¦ï¼‰
sudo /usr/local/mysql/support-files/mysql.server stop

# å¯åŠ¨MySQLï¼ˆå¦‚å·²åœæ­¢ï¼‰
sudo /usr/local/mysql/support-files/mysql.server start

# é‡å¯MySQL
sudo /usr/local/mysql/support-files/mysql.server restart
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: MySQLè¿žæŽ¥è¢«æ‹’ç»
```
Error: Access denied for user 'root'@'localhost'
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥.envæ–‡ä»¶ä¸­çš„DB_PASSWORDæ˜¯å¦æ­£ç¡®
2. å°è¯•é‡ç½®MySQL rootå¯†ç ï¼š
```bash
sudo /usr/local/mysql/bin/mysqladmin -u root password 'æ–°å¯†ç '
```

### Q2: Redisè¿žæŽ¥å¤±è´¥
```
Error: connect ECONNREFUSED 127.0.0.1:6379
```

**è§£å†³æ–¹æ¡ˆï¼š**
ç¡®ä¿Redisæ­£åœ¨è¿è¡Œï¼š
```bash
redis-cli ping  # åº”è¿”å›žPONG
```

å¦‚æžœæ²¡æœ‰è¿”å›žPONGï¼Œå¯åŠ¨Redisï¼š
```bash
redis-server
```

### Q3: åŽç«¯å¯åŠ¨æŠ¥é”™ - æ•°æ®åº“ä¸å­˜åœ¨
```
Error: Unknown database 'xingfuli'
```

**è§£å†³æ–¹æ¡ˆï¼š**
æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š
```bash
cd "/Users/cs/Desktop/CS/åˆ›ä¸š/ç›¸äº²é¡¹ç›®å¼€å‘/å¹¸ç¦åŠ›é¡¹ç›®å¼€å‘/database"
export PATH="/usr/local/mysql/bin:$PATH"
mysql -u root -p < 01_create_database.sql
```

---

## âœ… å®Œæ•´æ£€æŸ¥æ¸…å•

å¯åŠ¨é¡¹ç›®å‰ï¼š
- [ ] MySQLæ­£åœ¨è¿è¡Œï¼ˆå·²ç¡®è®¤âœ…ï¼‰
- [ ] Rediså·²å®‰è£…å¹¶è¿è¡Œ
- [ ] MySQLå·²æ·»åŠ åˆ°PATHï¼ˆå¯é€‰ä½†æŽ¨èï¼‰
- [ ] å·²åˆ›å»ºbackend/.envæ–‡ä»¶
- [ ] å·²æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- [ ] åŽç«¯ä¾èµ–å·²å®‰è£…ï¼ˆnpm installï¼‰
- [ ] å‰ç«¯ä¾èµ–å·²å®‰è£…ï¼ˆnpm installï¼‰

å¯åŠ¨éªŒè¯ï¼š
- [ ] åŽç«¯å¯åŠ¨æˆåŠŸï¼ˆhttp://localhost:3000/api/v1/health è¿”å›žæ­£å¸¸ï¼‰
- [ ] å‰ç«¯å¯åŠ¨æˆåŠŸï¼ˆhttp://localhost:5174 æ˜¾ç¤ºé¦–é¡µï¼‰
- [ ] å¯ä»¥æ³¨å†Œæ–°ç”¨æˆ·
- [ ] å¯ä»¥ç™»å½•

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥

å®ŒæˆRediså®‰è£…åŽï¼Œæ‚¨å°±å¯ä»¥å¯åŠ¨é¡¹ç›®äº†ï¼

å»ºè®®é¡ºåºï¼š
1. âœ… å®‰è£…Redisï¼ˆé€‰æ‹©ä¸Šé¢çš„ä»»ä¸€æ–¹æ³•ï¼‰
2. âœ… éªŒè¯Redisè¿è¡Œï¼ˆredis-cli pingï¼‰
3. âœ… é…ç½®backend/.env
4. âœ… åˆå§‹åŒ–æ•°æ®åº“
5. âœ… å¯åŠ¨åŽç«¯
6. âœ… å¯åŠ¨å‰ç«¯
7. âœ… å¼€å§‹æµ‹è¯•ï¼

æœ‰ä»»ä½•é—®é¢˜éšæ—¶å‘Šè¯‰æˆ‘ï¼ðŸ˜Š

