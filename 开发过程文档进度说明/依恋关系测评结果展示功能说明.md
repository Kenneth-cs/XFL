# 依恋关系测评结果展示功能说明

## 概述

在后台用户档案页面中实现依恋关系测评结果的详细展示，包括类型判定、三维度得分和详细解释。

**实现时间**：2026-01-15  
**参考文档**：
- `需求开发功能确定文档.md (358-391)`
- `依恋关系题库及计算逻辑.md`

---

## 核心功能

### 1. 依恋类型展示

**展示内容**：
1. **依恋类型标识**
   - 类型名称：安全型依恋、焦虑型依恋、回避型依恋、恐惧型依恋（紊乱型）
   - 类型标签：健康核心型、渴求亲密型、疏离独立型、矛盾纠结型
   - 维度组合：低焦虑+低回避、高焦虑+低回避、低焦虑+高回避、高焦虑+高回避
   - 带颜色标签：绿色（安全型）、橙色（焦虑型）、蓝色（回避型）、红色（紊乱型）

### 2. 三维度得分详情

**展示内容**：
1. **焦虑维度（Anxiety, A）**
   - 得分范围：0-12 分
   - 进度条展示
   - 描述：衡量对「关系被抛弃、不被爱」的担忧程度
   - 阈值：≥5 为高焦虑，<5 为低焦虑

2. **回避维度（Avoidance, B）**
   - 得分范围：0-12 分
   - 进度条展示
   - 描述：衡量对「情感亲密、过度依赖」的抗拒程度
   - 阈值：≥5 为高回避，<5 为低回避

3. **安全感维度（Security, C）**
   - 得分范围：0-12 分
   - 进度条展示
   - 描述：衡量对关系的安全感和信任程度
   - 阈值：≥5 为高安全感，<5 为低安全感

### 3. 类型详细解释

**四种类型的详细信息**：

#### 1. 安全型依恋「健康核心型」
- **维度组合**：低焦虑 + 低回避
- **核心特质**：安全感充足，既信任伴侣、愿意亲密，又能保持自我独立，是最健康的依恋类型。
- **典型行为表现**：
  - 沟通直接坦诚：开心时主动分享，有矛盾时愿意直面沟通，不冷战、不指责
  - 亲密与独立平衡：享受和伴侣的相处，也能坦然接受彼此的独处时间，不粘人、不疏离
  - 情绪稳定：不会因伴侣的小疏忽过度猜忌，被拒绝/产生矛盾时，能理性看待，不极端
  - 懂得共情：能感知伴侣的情绪需求，主动提供支持，也能坦然向伴侣求助
- **相处优势**：适配所有依恋类型，能包容伴侣的依恋短板，是亲密关系中的「稳定器」，关系质量往往最高。

#### 2. 焦虑型依恋「渴求亲密型」
- **维度组合**：高焦虑 + 低回避
- **核心特质**：极度渴望亲密与认可，害怕被抛弃，对关系的安全感极低，习惯通过「索取关注」确认爱意。
- **典型行为表现**：
  - 患得患失：伴侣回复消息慢、语气冷淡，就会脑补「对方不爱自己」，陷入焦虑
  - 过度索取联结：频繁发消息、打电话，要求报备行程，渴望时刻黏在一起，害怕独处
  - 情绪波动大：被忽视时易委屈、愤怒、哭闹，被安抚后又快速平复，反复循环
  - 低自我价值：把伴侣的态度当作自我价值的评判标准，会为了留住对方妥协、讨好，甚至放弃自我边界
- **核心痛点**：过度依赖会给伴侣带来巨大压力，容易让关系陷入「追-逃」模式，越焦虑越抓紧，伴侣越想回避。

#### 3. 回避型依恋「疏离独立型」
- **维度组合**：低焦虑 + 高回避
- **核心特质**：极度重视个人独立，排斥情感亲密与依赖，习惯用「疏离」和「冷漠」保护自己，内心深处害怕被束缚。
- **典型行为表现**：
  - 抗拒过度亲密：伴侣主动撒娇、倾诉、肢体亲密时，会下意识回避，感到烦躁
  - 情感封闭：很少袒露内心的脆弱与真实想法，被追问感受时，常以「没事」「没必要」敷衍
  - 逃避冲突：发生矛盾时第一反应是冷战、拉黑、失联，拒绝沟通，认为「独处比解决问题更重要」
  - 假性独立：嘴上说「不需要伴侣」，内心深处渴望被爱，但不敢接受，会把亲密等同于「失去自由」
- **核心痛点**：疏离的行为会让伴侣感到被忽视、被冷落，长期下来消耗对方的爱意，难以建立深度联结。

#### 4. 恐惧型依恋（紊乱型）「矛盾纠结型」
- **维度组合**：高焦虑 + 高回避
- **核心特质**：内心充满极致矛盾—— 既极度渴望亲密、害怕被抛弃（高焦虑），又极度抗拒亲密、害怕被伤害（高回避），是最不稳定的依恋类型。
- **典型行为表现**：
  - 亲密推拉：伴侣靠近时，会下意识推开、疏离；伴侣离开时，又会极度焦虑、拼命挽回，反复陷入「追-逃-追」
  - 敏感又冷漠：对伴侣的负面信号极度敏感，容易脑补被抛弃，却又不愿主动沟通，用冷漠伪装自己的脆弱
  - 信任匮乏：很难真正信任伴侣，即使对方表达爱意，也会怀疑其真实性，害怕投入后被背叛
  - 自我内耗：一边渴望稳定的亲密关系，一边又不断破坏关系，陷入「想要爱，又怕爱」的极致内耗
- **核心痛点**：自身的矛盾会让关系反复拉扯，不仅折磨自己，也会让伴侣感到疲惫，是亲密关系中最难磨合的类型。

---

## 技术实现

### 1. 工具文件

**路径**：`frontend-admin/src/utils/attachment-info.ts`

**主要内容**：
- `ATTACHMENT_TYPE_INFO`：四种依恋类型的完整信息常量
- `getAttachmentTypeInfo(type: string)`：根据类型名称获取详细信息
- `getDimensionDescription(dimension: string, score: number)`：根据维度和得分生成描述

**类型定义**：
```typescript
interface AttachmentTypeInfo {
  type: string // 类型名称
  fullName: string // 完整名称
  label: string // 类型标签
  dimensions: string // 维度组合
  coreTraits: string // 核心特质
  behaviors: string[] // 典型行为表现
  advantage?: string // 相处优势（安全型）
  painPoint?: string // 核心痛点（其他类型）
  color: string // UI 颜色
}
```

### 2. 前端组件

**文件**：`frontend-admin/src/views/members/MemberDetail.vue`

**新增内容**：
1. **导入**：
   ```typescript
   import { getAttachmentTypeInfo, getDimensionDescription } from '../../utils/attachment-info';
   ```

2. **Computed 属性**：
   ```typescript
   const attachmentDetailInfo = computed(() => {
     if (!assessmentResults.attachment?.resultData?.type) {
       return null;
     }
     
     const type = assessmentResults.attachment.resultData.type;
     const typeInfo = getAttachmentTypeInfo(type);
     
     if (!typeInfo) {
       return null;
     }
     
     const scores = {
       anxiety: assessmentResults.attachment.resultData.anxietyScore || 0,
       avoidance: assessmentResults.attachment.resultData.avoidanceScore || 0,
       security: assessmentResults.attachment.resultData.securityScore || 0,
     };
     
     return {
       ...typeInfo,
       scores,
     };
   });
   ```

3. **UI 展示**：
   - 使用 `a-card`, `a-descriptions`, `a-tag`, `a-progress`, `a-alert` 组件
   - 分层展示：类型 → 三维度得分 → 核心特质 → 行为表现 → 优势/痛点

---

## 判定逻辑

### 类型判定规则（优先级：紊乱型 > 焦虑型 > 回避型 > 安全型）

```python
def get_attachment_type(A, B, C):
    if A >= 5 and B >= 5:
        return "高焦虑+高回避（紊乱型）"
    elif A >= 5:
        return "焦虑型"
    elif B >= 5:
        return "回避型"
    elif C >= 5:
        return "安全型"
    else:
        return "待进一步沟通（请联系红娘老师）"
```

---

## 测试验证

### 1. 数据准备

确保后端返回的测评数据包含：
```json
{
  "attachment": {
    "resultData": {
      "type": "安全型",
      "anxietyScore": 3,
      "avoidanceScore": 2,
      "securityScore": 8
    }
  }
}
```

### 2. 查看效果

1. 登录后台系统
2. 进入"会员列表" → 点击某个已完成依恋关系测评的用户
3. 在"档案详情" Tab 中，向下滚动到"测评结果"模块
4. 查看：
   - 依恋类型（带标签和颜色）
   - 三维度得分（进度条 + 描述）
   - 核心特质
   - 典型行为表现（列表）
   - 相处优势/核心痛点（警告框）

---

## UI 效果

### 颜色方案
- **安全型**：绿色 (#52c41a) - 代表健康、稳定
- **焦虑型**：橙色 (#faad14) - 代表焦虑、担忧
- **回避型**：蓝色 (#1890ff) - 代表冷静、疏离
- **紊乱型**：红色 (#f5222d) - 代表警示、复杂

### 布局结构
```
┌─ 依恋关系测评结果 ────────────────────────────┐
│ ┌─ 依恋类型 ─────────────────────────────┐ │
│ │ [安全型依恋] [健康核心型]              │ │
│ │ 维度组合：低焦虑 + 低回避              │ │
│ └────────────────────────────────────────┘ │
│                                              │
│ ┌─ 三维度得分详情 ───────────────────────┐ │
│ │ [A] 焦虑维度 (Anxiety)      3/12 分    │ │
│ │ ████░░░░░░░░ 25%                       │ │
│ │ 对关系的安全感较强，不易焦虑           │ │
│ │                                         │ │
│ │ [B] 回避维度 (Avoidance)    2/12 分    │ │
│ │ ███░░░░░░░░░ 17%                       │ │
│ │ 愿意建立情感亲密，不排斥依赖           │ │
│ │                                         │ │
│ │ [C] 安全感维度 (Security)   8/12 分    │ │
│ │ ████████░░░░ 67%                       │ │
│ │ 安全感充足，信任伴侣                   │ │
│ └────────────────────────────────────────┘ │
│                                              │
│ ┌─ 核心特质 ─────────────────────────────┐ │
│ │ 安全感充足，既信任伴侣、愿意亲密...    │ │
│ └────────────────────────────────────────┘ │
│                                              │
│ ┌─ 典型行为表现 ─────────────────────────┐ │
│ │ • 沟通直接坦诚：开心时主动分享...      │ │
│ │ • 亲密与独立平衡：享受和伴侣的相处...  │ │
│ │ • ...                                   │ │
│ └────────────────────────────────────────┘ │
│                                              │
│ ┌─ 相处优势 ─────────────────────────────┐ │
│ │ ✓ 适配所有依恋类型，能包容伴侣的...    │ │
│ └────────────────────────────────────────┘ │
└──────────────────────────────────────────────┘
```

---

**文档版本**: v1.0  
**创建时间**: 2026-01-15  
**编写人员**: AI Assistant  
**状态**: ✅ 功能已完成

