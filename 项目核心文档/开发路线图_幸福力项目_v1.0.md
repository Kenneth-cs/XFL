# 幸福力婚恋系统开发路线图 (Roadmap)

| 文档版本 | 日期 | 编写 | 说明 |
| :--- | :--- | :--- | :--- |
| v1.0 | 2026-01-11 | AI Assistant | 基于PRD v1.0及需求文档规划 |

本路线图旨在将复杂的业务需求拆解为可执行、可验证的开发阶段。整体遵循“**底层架构先行 -> 核心数据沉淀 -> 智能业务闭环**”的策略，确保每个阶段均有独立的可交付价值。

---

## 📅 第一阶段：MVP核心架构与多租户用户体系
**目标**：搭建系统骨架，打通前后台账户体系，实现核心的“门店隔离”机制。

### 1.1 基础设施搭建
*   **数据库设计**：设计满足多租户隔离的 MySQL 表结构（核心字段 `store_id`）。
*   **ID生成引擎**：实现门店ID、前台用户ID、后台用户ID的生成规则（按PRD规则：`XFL`前缀+序列号/随机偏移）。
*   **基础服务**：搭建后端框架，配置 OSS 对象存储（用于大头照上传）。

### 1.2 后台管理系统 (RBAC基础)
*   **系统管理**：
    *   超级管理员登录。
    *   门店管理：新增门店（生成ID）、禁用/反禁用门店。
    *   人员管理：后台用户注册、审核（超管/老板审核）、角色分配。
*   **角色权限控制**：
    *   实现 超管、门店老板、门店负责人、普通红娘 四级权限体系。
    *   实现数据访问控制（普通红娘手机号脱敏、仅看本门店数据）。

### 1.3 前台用户系统 (H5)
*   **注册流程**：手机号验证、基础资料填写（姓名/生日/学历等）、**归属门店选择**。
*   **登录系统**：手机号+密码登录。
*   **个人中心**：查看基础档案信息。

### ✅ 阶段交付物
*   前后台可登录，账号体系互通。
*   门店与用户数据实现严格隔离。
*   用户ID按规则正确生成。

---

## 📅 第二阶段：三大测评引擎与动态档案系统
**目标**：完成C端核心互动功能，并实现后台档案的“智能化”计算，积累匹配所需的基础数据。

### 2.1 心理测评引擎 (前台)
*   **九型人格**：
    *   题库录入与前端交互。
    *   算法实现：得分统计、Top3筛选、15%阈值判定。
    *   结果展示：柱状图 + 对应人格文案。
*   **依恋关系**：
    *   题库录入（焦虑/回避/安全三组）。
    *   算法实现：ABC三分值计算及四种类型判定优先级。
    *   结果展示：类型标签 + 特质描述。
*   **婚恋幸福力**：
    *   题库录入（20个维度）。
    *   结果展示：**双层圆环图**（UI还原，根据得分动态填充扇区颜色）。

### 2.2 动态档案与MV计算 (后台)
*   **档案详情页**：
    *   展示前台同步的基础信息与测评结果。
    *   开发**扩展字段编辑**功能（红娘、门店负责人、门店老板可填写长相、收入、房车等）。
*   **MV值计算引擎**：
    *   录入5套地域计算方案（广东/江浙/京沪等）。
    *   实现**触发式计算**：当档案中关键字段（如年龄、学历、收入）变更时，自动重新计算MV得分。

### ✅ 阶段交付物
*   前台用户可完成所有测评并查看结果。
*   后台可查看用户完整档案（含测评结果）。
*   后台录入用户扩展信息后，系统能自动算出准确的MV值。

---

## 📅 第三阶段：智能匹配引擎与服务闭环
**目标**：实现B端核心业务价值，打通“匹配-约见-反馈”的服务链路。

### 3.1 智能匹配系统
*   **发起匹配**：
    *   开发匹配弹窗：支持按姓名/手机号搜索候选人。
    *   **筛选逻辑**：门店隔离 + 硬性条件（年龄/身高/学历）+ **服务轨迹排除**（去重）。
*   **匹配算法**：
    *   MV匹配：`|差值| ≤ 5` 判定逻辑。
    *   九型人格匹配：矩阵算法（+1/0/-1），实现“一票否决”逻辑。
*   **结果展示**：
    *   **批次化列表**：按时间倒序展示匹配批次。
    *   详情展示：双方幸福力圆环对比、性格重合度分析。

### 3.2 服务轨迹管理
*   **匹配轨迹**：记录匹配结果（看中/未看中），数据双向同步。
*   **约见轨迹**：记录线下约见时间、反馈、状态（恋爱/结婚），数据双向同步。
*   **治疗轨迹**：简单的文本记录功能。

### 3.3 历史查询与优化
*   匹配记录查询（支持模糊搜索）。
*   优化匹配计算性能，确保秒级响应。

### ✅ 阶段交付物
*   红娘可完成“发起匹配 -> 系统计算 -> 查看结果”全流程。
*   服务轨迹可记录并双向展示。
*   匹配结果准确符合算法逻辑。

---

## 📅 第四阶段：系统完善、优化与部署
**目标**：提升系统稳定性，处理非功能性需求，准备上线。

### 4.1 系统完善
*   **高级管理功能**：门店MV方案的绑定与修改、更细致的权限微调。
*   **数据修正**：处理初期测试发现的数据边界情况。

### 4.2 非功能性优化
*   **安全加固**：
    *   API 鉴权与防越权测试。
    *   敏感数据（密码/手机号）加密与脱敏检查。
*   **性能优化**：数据库索引优化，针对大列表查询的性能调优。
*   **UI/UX 细节**：前台H5适配性调整，后台操作体验优化。

### 4.3 部署与交付
*   服务器环境搭建 (腾讯云)。
*   域名解析与SSL证书配置。
*   正式数据迁移与初始化。
*   编写操作手册与验收文档。

### ✅ 阶段交付物
*   生产环境可用的完整系统。
*   系统验收报告。

---

## 📊 资源与依赖建议

*   **并行开发建议**：
    *   **阶段二**期间，前端开发H5测评页面时，后端可同步开发MV计算引擎与后台档案接口。
    *   **阶段三**为逻辑最复杂阶段，建议预留充足的测试时间（特别是匹配算法的准确性验证）。
*   **关键数据准备**：
    *   需提前准备完整的测评题库数据（题目、选项分值、维度映射）。
    *   需提前确认5套MV地域计算的具体评分细则配置。

